# createTime: '2026-02-06T01:09:32.234458283Z'
# filename: cloudbuild.yaml
# github:
#   name: expenses
#   owner: bwallerperu
#   push:
#     branch: ^main$
# id: 498aeaf0-1ed1-4ff2-a537-0c48deb615b1
# name: deploy-on-commit-msg
# resourceName: projects/surfn-peru/locations/global/triggers/498aeaf0-1ed1-4ff2-a537-0c48deb615b1

id: 498aeaf0-1ed1-4ff2-a537-0c48deb615b1
name: deploy-on-tag-suffix
resourceName: projects/surfn-peru/locations/global/triggers/498aeaf0-1ed1-4ff2-a537-0c48deb615b1
filename: cloudbuild.yaml
github:
  owner: bwallerperu
  name: expenses
  push:
    # Matches any tag that ends with [deploy]
    # Example matches: v1.0[deploy], release-abc[deploy]
    tag: '.*\[deploy\]$'

# 1. Tag your current commit
# git tag v1.2[deploy]
# git push origin v1.2[deploy]

# Do this once in your terminal
# git config --global alias.deploy '!git tag "$(git log -1 --pretty=%B | head -n 1 | tr " " "-")-deploy" && git push origin --tags'
